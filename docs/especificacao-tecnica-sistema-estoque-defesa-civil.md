# Sistema de Controle de Estoque e Invent√°rio - Defesa Civil do Amazonas
## Especifica√ß√£o T√©cnica Unificada

---

## üìã Informa√ß√µes do Projeto

**√ìrg√£o:** Defesa Civil do Amazonas (DCAM)  
**Sistema:** SISPDEC - M√≥dulo de Invent√°rio  
**Vers√£o:** 2.0  
**Data:** Janeiro 2025  
**Respons√°vel:** Departamento de Desenvolvimento de Sistemas  

**Contatos:**
- üåê Website: www.defesacivil.am.gov.br
- üì± Instagram: @defesacivil.amazonas
- üê¶ Twitter: @defesacivilam
- üìç Endere√ßo: Rua Urucar√°, 183, Cachoeirinha - Manaus/AM - CEP: 69065-180

---

## üéØ Vis√£o Geral do Sistema

### **Objetivo Principal**
Cria√ß√£o de um m√≥dulo de Invent√°rio completo para cadastrar e gerir todos os materiais adquiridos pela Defesa Civil do Amazonas, contemplando entrada em estoque, aloca√ß√£o/entrega para departamentos internos ou munic√≠pios, transfer√™ncias, doa√ß√µes, com suporte a anexos, integra√ß√£o SIGED, controle por unidades de medida e rastreabilidade completa.

### **Caracter√≠sticas do Sistema**
- **Estoque central √∫nico** para armazenar materiais da Defesa Civil
- **M√∫ltiplas unidades de medida** com convers√µes autom√°ticas
- **Rastreabilidade completa** de todas as movimenta√ß√µes
- **Integra√ß√£o com SIGED** via links e APIs
- **Sistema de aprova√ß√µes** para opera√ß√µes cr√≠ticas
- **Auditoria e logs** detalhados
- **Suporte a anexos** (fotos, PDFs, documentos)

### **Escopo Inicial**
- ‚úÖ Cadastro de Material (entrada em estoque)
- ‚úÖ Movimenta√ß√µes: Entrega/Aloca√ß√£o, Transfer√™ncia, Doa√ß√£o, Ajuste, Baixa
- ‚úÖ Consulta/Relat√≥rios avan√ßados
- ‚úÖ Perfis e permiss√µes granulares
- ‚úÖ Sistema de aprova√ß√µes
- ‚úÖ Integra√ß√£o com SIGED

---

## üë• Personas e Perfis de Usu√°rio

### **Personas Principais**

| Persona | Responsabilidades | Acesso |
|---------|------------------|--------|
| **Almoxarife/Estoquista** | Cadastra materiais, gerencia estoque, realiza movimenta√ß√µes | Operacional completo |
| **Gestor** | Aprova opera√ß√µes cr√≠ticas, consulta relat√≥rios consolidados | Aprova√ß√µes e relat√≥rios |
| **Chefe de Departamento** | Solicita e recebe materiais, consulta itens alocados | Requisi√ß√µes e consultas |
| **Agente Municipal** | Recebe materiais destinados ao munic√≠pio, anexa termos | Recebimento e documenta√ß√£o |
| **Auditoria/Controladoria** | Acesso somente leitura aos registros e documenta√ß√£o | Somente consulta |

### **Perfis de Permiss√£o**

| Perfil | Permiss√µes | Descri√ß√£o |
|--------|------------|-----------|
| `INVENTARIO_ADMIN` | **Total** | Acesso completo ao sistema |
| `INVENTARIO_GESTOR` | **Aprova√ß√µes** | Aprova doa√ß√µes, conclui transfer√™ncias |
| `INVENTARIO_OPERADOR` | **Operacional** | Cadastra e movimenta (exceto doa√ß√£o e baixa com valor) |
| `INVENTARIO_CONSULTA` | **Leitura** | Consultas e relat√≥rios |

---

## üóÇÔ∏è Modelo de Dados Unificado

### **1. üì¶ MATERIAL**
**Descri√ß√£o:** Cadastro principal de todos os itens que podem ser estocados.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `nome` | VARCHAR(200) | Nome do material | Obrigat√≥rio |
| `id_compra` | VARCHAR(100) | ID da compra | Obrigat√≥rio, indexado |
| `link_siged` | URL | Link para processo no SIGED | Opcional, validado |
| `descricao` | TEXT | Descri√ß√£o detalhada | Obrigat√≥rio |
| `udm_base_id` | UUID | Unidade de medida base | FK(UDM) |
| `valor_unitario_compra` | DECIMAL(14,2) | Valor unit√°rio de compra | ‚â• 0 |
| `possui_tombo` | BOOLEAN | Se possui tombamento | Default false |
| `numero_tombo` | VARCHAR(50) | N√∫mero do tombo | √önico se informado |
| `tags` | TEXT[] | Tags para busca | Opcional |
| `min_stock` | DECIMAL(18,6) | Estoque m√≠nimo | Alerta de reposi√ß√£o |
| `max_stock` | DECIMAL(18,6) | Estoque m√°ximo | Alerta de excesso |
| `is_active` | BOOLEAN | Material ativo | Default true |
| `criado_por` | UUID | Usu√°rio criador | FK(Usuario) |
| `criado_em` | TIMESTAMP | Data de cria√ß√£o | Auto |

**Exemplos de materiais:**
- Canos e conex√µes hidr√°ulicas
- Material el√©trico (cabos, disjuntores)
- Equipamentos (lanchas, purificadores)
- EPIs (capacetes, coletes, luvas)
- Kits de emerg√™ncia

---

### **2. üè∑Ô∏è MATERIAL_CATEGORY**
**Descri√ß√£o:** Organiza√ß√£o hier√°rquica dos materiais por tipo.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `name` | VARCHAR(100) | Nome da categoria | Obrigat√≥rio |
| `parent_id` | UUID | Categoria pai | FK(Material_Category) |
| `description` | TEXT | Descri√ß√£o da categoria | Opcional |
| `is_active` | BOOLEAN | Categoria ativa | Default true |

**Estrutura hier√°rquica:**
```
üìÅ El√©trico
  ‚îî‚îÄ‚îÄ Cabos
  ‚îî‚îÄ‚îÄ Disjuntores
  ‚îî‚îÄ‚îÄ L√¢mpadas
üìÅ Hidr√°ulico
  ‚îî‚îÄ‚îÄ Canos
  ‚îî‚îÄ‚îÄ Conex√µes
  ‚îî‚îÄ‚îÄ Bombas
üìÅ EPIs
  ‚îî‚îÄ‚îÄ Prote√ß√£o Individual
  ‚îî‚îÄ‚îÄ Equipamentos de Seguran√ßa
üìÅ Equipamentos
  ‚îî‚îÄ‚îÄ Embarca√ß√µes
  ‚îî‚îÄ‚îÄ Purificadores
  ‚îî‚îÄ‚îÄ Geradores
üìÅ Emerg√™ncia
  ‚îî‚îÄ‚îÄ Kits de Primeiros Socorros
  ‚îî‚îÄ‚îÄ Equipamentos de Resgate
```

---

### **3. üìè UDM (Unidade de Medida)**
**Descri√ß√£o:** Unidades de medida para contabilizar os materiais.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `codigo` | VARCHAR(20) | C√≥digo da unidade | √önico |
| `nome` | VARCHAR(50) | Nome completo | Obrigat√≥rio |
| `simbolo` | VARCHAR(10) | S√≠mbolo da unidade | Obrigat√≥rio |
| `tipo` | ENUM | Tipo da unidade | PESO, VOLUME, COMPRIMENTO, UNIDADE |

**Exemplos:**
- UN (Unidade) - para itens individuais
- CX (Caixa) - para materiais embalados
- KG (Quilograma) - para materiais pesados
- L (Litro) - para l√≠quidos
- M (Metro) - para cabos, canos
- P√á (Pe√ßa) - para componentes

---

### **4. üîÑ CONVERSAO_UDM**
**Descri√ß√£o:** Convers√µes entre unidades de medida por material.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `material_id` | UUID | Material | FK(Material) |
| `udm_origem_id` | UUID | Unidade origem | FK(UDM) |
| `udm_destino_id` | UUID | Unidade destino | FK(UDM) |
| `fator` | DECIMAL(18,6) | Fator de convers√£o | > 0 |

**Exemplo:**
```
Material: Cabo El√©trico
1 Caixa = 12 Unidades
1 Metro = 100 Cent√≠metros
```

---

### **5. üì¶ LOTE**
**Descri√ß√£o:** Lotes de entrada de materiais no estoque.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `material_id` | UUID | Material | FK(Material) |
| `quantidade_base` | DECIMAL(18,6) | Quantidade na UDM base | ‚â• 0 |
| `condicao_inicial` | ENUM | Condi√ß√£o inicial | NOVO, BOM, REGULAR, RUIM |
| `valor_unitario_compra` | DECIMAL(14,2) | Valor unit√°rio | ‚â• 0 |
| `numero_empenho` | VARCHAR(50) | N√∫mero do empenho | Opcional |
| `numero_nota_fiscal` | VARCHAR(50) | N√∫mero da NF | Opcional |
| `validade` | DATE | Data de validade | Opcional |
| `criado_em` | TIMESTAMP | Data de cria√ß√£o | Auto |

---

### **6. üéØ DESTINO**
**Descri√ß√£o:** Destinos para aloca√ß√£o de materiais.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `tipo` | ENUM | Tipo do destino | DEPARTAMENTO, MUNICIPIO, OUTRA_SECRETARIA |
| `ref_id` | UUID | Refer√™ncia externa | FK para tabela espec√≠fica |
| `nome` | VARCHAR(200) | Nome do destino | Obrigat√≥rio |
| `endereco` | TEXT | Endere√ßo completo | Opcional |
| `contato` | VARCHAR(100) | Pessoa de contato | Opcional |
| `telefone` | VARCHAR(20) | Telefone de contato | Opcional |
| `is_active` | BOOLEAN | Destino ativo | Default true |

---

### **7. üìù MOVIMENTACAO**
**Descri√ß√£o:** Registro de todas as movimenta√ß√µes de estoque.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `lote_id` | UUID | Lote movimentado | FK(Lote) |
| `tipo` | ENUM | Tipo de movimenta√ß√£o | ENTRADA, ALOCACAO, TRANSFERENCIA, DOACAO, AJUSTE, BAIXA |
| `origem_destino_from` | UUID | Origem | FK(Destino) |
| `origem_destino_to` | UUID | Destino | FK(Destino) |
| `quantidade_base` | DECIMAL(18,6) | Quantidade movimentada | Obrigat√≥rio |
| `condicao` | ENUM | Condi√ß√£o do material | NOVO, BOM, REGULAR, RUIM, INSERVIVEL |
| `descricao` | TEXT | Descri√ß√£o/observa√ß√µes | Opcional |
| `status` | ENUM | Status da movimenta√ß√£o | PENDENTE, APROVADO, REPROVADO, CONCLUIDO |
| `requer_aprovacao` | BOOLEAN | Se requer aprova√ß√£o | Default false |
| `aprovado_por` | UUID | Usu√°rio aprovador | FK(Usuario) |
| `aprovado_em` | TIMESTAMP | Data de aprova√ß√£o | Opcional |
| `criado_por` | UUID | Usu√°rio criador | FK(Usuario) |
| `criado_em` | TIMESTAMP | Data de cria√ß√£o | Auto |

---

### **8. üìä SALDO_DESTINO**
**Descri√ß√£o:** Saldos consolidados por lote e destino.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `lote_id` | UUID | Lote | FK(Lote) |
| `destino_id` | UUID | Destino | FK(Destino) |
| `quantidade_base` | DECIMAL(18,6) | Quantidade dispon√≠vel | ‚â• 0 |
| `updated_at` | TIMESTAMP | √öltima atualiza√ß√£o | Auto |

---

### **9. üìé ANEXO**
**Descri√ß√£o:** Anexos polim√≥rficos para materiais, lotes e movimenta√ß√µes.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `referencia_tipo` | ENUM | Tipo da refer√™ncia | MATERIAL, LOTE, MOVIMENTACAO |
| `referencia_id` | UUID | ID da refer√™ncia | FK din√¢mica |
| `nome_arquivo` | VARCHAR(255) | Nome do arquivo | Obrigat√≥rio |
| `url` | VARCHAR(500) | URL do arquivo | Obrigat√≥rio |
| `tipo_mime` | VARCHAR(100) | Tipo MIME | Obrigat√≥rio |
| `hash` | VARCHAR(64) | Hash SHA256 | Obrigat√≥rio |
| `tamanho` | BIGINT | Tamanho em bytes | Obrigat√≥rio |
| `criado_por` | UUID | Usu√°rio uploader | FK(Usuario) |
| `criado_em` | TIMESTAMP | Data de upload | Auto |

---

### **10. üîç AUDITORIA**
**Descri√ß√£o:** Log de auditoria para todas as opera√ß√µes.

| Campo | Tipo | Descri√ß√£o | Regras |
|-------|------|-----------|--------|
| `id` | UUID | Identificador √∫nico | PK |
| `entidade` | VARCHAR(50) | Nome da entidade | Obrigat√≥rio |
| `entidade_id` | UUID | ID da entidade | Obrigat√≥rio |
| `acao` | ENUM | A√ß√£o realizada | CREATE, UPDATE, DELETE, MOVE |
| `payload_old` | JSONB | Estado anterior | Opcional |
| `payload_new` | JSONB | Estado novo | Opcional |
| `usuario` | UUID | Usu√°rio respons√°vel | FK(Usuario) |
| `ip_address` | INET | Endere√ßo IP | Opcional |
| `user_agent` | TEXT | User Agent | Opcional |
| `data_hora` | TIMESTAMP | Data/hora da a√ß√£o | Auto |

---

## üîÑ Fluxo Operacional Completo

### **üìä Fluxograma do Sistema**

```mermaid
graph TD
    %% Coluna 1: Cadastro e Entrada
    A[üì¶ Cadastro de Material] --> B[üè∑Ô∏è Definir Categoria]
    B --> C[üìè Definir UDM Base]
    C --> D[üîÑ Configurar Convers√µes]
    D --> E[üì¶ Criar Lote de Entrada]
    E --> F[üìé Anexar Documentos]
    F --> G[üìä Atualizar Saldos]
    
    %% Coluna 2: Requisi√ß√µes e Aloca√ß√µes
    H[üè¢ Necessidade de Material] --> I[üìù Criar Requisi√ß√£o]
    I --> J[üìã Adicionar Itens]
    J --> K{üîç An√°lise da Requisi√ß√£o}
    
    K -->|Aprovada| L[‚úÖ Aprovar Quantidades]
    K -->|Rejeitada| M[‚ùå Requisi√ß√£o Negada]
    K -->|Parcial| N[‚öñÔ∏è Aprovar Parcialmente]
    
    L --> O[üì§ Gerar Aloca√ß√£o]
    N --> O
    O --> P[üì¶ Separar Materiais]
    P --> Q[üöö Entregar ao Destino]
    Q --> R[üìä Atualizar Saldos]
    R --> S{üìä Verificar N√≠veis}
    
    S -->|Abaixo M√≠nimo| T[üö® Alerta Reposi√ß√£o]
    S -->|Acima M√°ximo| U[‚ö†Ô∏è Alerta Excesso]
    S -->|Normal| V[‚úÖ Estoque OK]
    
    %% Coluna 3: Transfer√™ncias e Doa√ß√µes
    W[üîÑ Necessidade de Transfer√™ncia] --> X[üìù Criar Transfer√™ncia]
    X --> Y{üèõÔ∏è Tipo de Transfer√™ncia}
    
    Y -->|Interna| Z[‚úÖ Processar Diretamente]
    Y -->|Intersecretarias| AA[‚è≥ Aguardar Aprova√ß√£o]
    
    AA --> BB{üë§ Aprova√ß√£o Gestor}
    BB -->|Aprovada| CC[‚úÖ Processar Transfer√™ncia]
    BB -->|Rejeitada| DD[‚ùå Transfer√™ncia Negada]
    
    Z --> EE[üì¶ Movimentar Material]
    CC --> EE
    EE --> FF[üìä Atualizar Saldos]
    
    %% Coluna 4: Doa√ß√µes
    GG[üéÅ Solicita√ß√£o de Doa√ß√£o] --> HH[üìù Criar Doa√ß√£o]
    HH --> II[üìé Anexar Autoriza√ß√£o]
    II --> JJ[‚è≥ Aguardar Aprova√ß√£o]
    JJ --> KK{üë§ Aprova√ß√£o Gestor}
    
    KK -->|Aprovada| LL[‚úÖ Processar Doa√ß√£o]
    KK -->|Rejeitada| MM[‚ùå Doa√ß√£o Negada]
    
    LL --> NN[üì¶ Entregar Material]
    NN --> OO[üìä Atualizar Saldos]
    
    %% Coluna 5: Invent√°rio e Ajustes
    PP[üìÖ Per√≠odo de Invent√°rio] --> QQ[üîç Iniciar Contagem]
    QQ --> RR[üìã Contar Fisicamente]
    RR --> SS{üìä Comparar com Sistema}
    
    SS -->|Igual| TT[‚úÖ Invent√°rio OK]
    SS -->|Diferen√ßa| UU[‚öñÔ∏è Criar Ajuste]
    
    UU --> VV[üìù Justificar Diferen√ßa]
    VV --> WW[üìä Aplicar Corre√ß√£o]
    WW --> XX[üìä Atualizar Saldos]
    
    %% Coluna 6: Baixas
    YY[üîß Material Avariado/Inserv√≠vel] --> ZZ[üìù Criar Baixa]
    ZZ --> AAA[üìé Anexar Laudo]
    AAA --> BBB[‚è≥ Aguardar Aprova√ß√£o]
    BBB --> CCC{üë§ Aprova√ß√£o Gestor}
    
    CCC -->|Aprovada| DDD[‚úÖ Processar Baixa]
    CCC -->|Rejeitada| EEE[‚ùå Baixa Negada]
    
    DDD --> FFF[üìä Atualizar Saldos]
    FFF --> GGG[üìù Registrar Log]
    
    %% Converg√™ncia final
    XX --> GGG
    OO --> GGG
    V --> GGG
    
    %% Posicionamento das colunas
    A ~~~ H
    H ~~~ W
    W ~~~ GG
    GG ~~~ PP
    PP ~~~ YY
    
    %% Estilos
    classDef cadastro fill:#8d6e63,stroke:#3e2723,stroke-width:2px,color:#fff
    classDef processo fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
    classDef decisao fill:#fff3e0,stroke:#f57c00,stroke-width:2px
    classDef sucesso fill:#e8f5e8,stroke:#388e3c,stroke-width:2px
    classDef alerta fill:#ffebee,stroke:#d32f2f,stroke-width:2px
    classDef aprovacao fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
    
    class A,B,C,D,E,F,G,II,AAA,ZZ cadastro
    class I,J,O,P,Q,R,X,EE,HH,NN,QQ,RR,UU,VV,WW,XX,DDD,FFF processo
    class K,S,Y,BB,KK,SS,CCC decisao
    class L,V,Z,CC,LL,TT,DDD sucesso
    class M,T,U,DD,MM,EEE alerta
    class N,AA,JJ,BBB,UU aprovacao
```

---

## üéØ Requisitos Funcionais (RF)

### **RF-01: Cadastro de Material**
- ‚úÖ Cadastrar material com dados b√°sicos (nome, descri√ß√£o, categoria, UDM base)
- ‚úÖ Vincular ID de compra e link SIGED
- ‚úÖ Definir valor unit√°rio de compra
- ‚úÖ Configurar tombamento (se aplic√°vel)
- ‚úÖ Adicionar tags para busca
- ‚úÖ Definir n√≠veis de estoque m√≠nimo/m√°ximo

### **RF-02: Gest√£o de Lotes**
- ‚úÖ Criar lotes por entrada de material
- ‚úÖ Permitir m√∫ltiplas entradas do mesmo material
- ‚úÖ Registrar n√∫mero de empenho e nota fiscal
- ‚úÖ Definir data de validade (quando aplic√°vel)
- ‚úÖ Anexar documentos comprobat√≥rios

### **RF-03: Unidades de Medida**
- ‚úÖ Suportar m√∫ltiplas UDMs por material
- ‚úÖ Configurar convers√µes autom√°ticas
- ‚úÖ Permitir movimenta√ß√£o em qualquer UDM
- ‚úÖ Converter automaticamente para UDM base

### **RF-04: Aloca√ß√£o/Entrega**
- ‚úÖ Alocar material para departamento interno
- ‚úÖ Entregar material para munic√≠pio
- ‚úÖ Registrar condi√ß√£o do material
- ‚úÖ Anexar termos de entrega
- ‚úÖ Atualizar saldos automaticamente

### **RF-05: Transfer√™ncias**
- ‚úÖ Transferir entre departamentos
- ‚úÖ Transferir entre munic√≠pios
- ‚úÖ Transferir entre secretarias (com aprova√ß√£o)
- ‚úÖ Registrar justificativa
- ‚úÖ Anexar documentos de transfer√™ncia

### **RF-06: Doa√ß√µes**
- ‚úÖ Doar para outras secretarias
- ‚úÖ Doar para entidades externas
- ‚úÖ Exigir anexos de autoriza√ß√£o
- ‚úÖ Requerer aprova√ß√£o do gestor
- ‚úÖ Registrar ato de doa√ß√£o

### **RF-07: Ajustes de Estoque**
- ‚úÖ Ajustar por invent√°rio f√≠sico
- ‚úÖ Ajustar por perdas/avarias
- ‚úÖ Ajustar por validade vencida
- ‚úÖ Registrar justificativa
- ‚úÖ Anexar laudos/documentos

### **RF-08: Baixas**
- ‚úÖ Baixar material inserv√≠vel
- ‚úÖ Baixar material avariado
- ‚úÖ Exigir laudo t√©cnico
- ‚úÖ Requerer aprova√ß√£o
- ‚úÖ Registrar motivo da baixa

### **RF-09: Consultas e Relat√≥rios**
- ‚úÖ Consultar saldos por material/lote/destino
- ‚úÖ Filtrar por condi√ß√£o, per√≠odo, categoria
- ‚úÖ Hist√≥rico completo de movimenta√ß√µes
- ‚úÖ Relat√≥rios de auditoria
- ‚úÖ Exportar para CSV/Excel

### **RF-10: Sistema de Aprova√ß√µes**
- ‚úÖ Fila de aprova√ß√µes pendentes
- ‚úÖ Notifica√ß√µes para gestores
- ‚úÖ Hist√≥rico de aprova√ß√µes
- ‚úÖ Justificativas de reprova√ß√£o
- ‚úÖ Workflow de aprova√ß√£o

---

## üîí Regras de Neg√≥cio (RB)

### **RB-01: Controle de Saldo**
- ‚ùå **N√£o permitir** sa√≠da/aloca√ß√£o se saldo insuficiente
- ‚úÖ **Validar** disponibilidade antes de qualquer movimenta√ß√£o
- ‚úÖ **Calcular** saldo em tempo real

### **RB-02: Aprova√ß√µes Obrigat√≥rias**
- ‚úÖ **Transfer√™ncias intersecretarias** requerem aprova√ß√£o
- ‚úÖ **Doa√ß√µes** requerem aprova√ß√£o e anexos
- ‚úÖ **Baixas com valor** requerem aprova√ß√£o
- ‚úÖ **Ajustes significativos** podem requerer aprova√ß√£o

### **RB-03: Unidades de Medida**
- ‚úÖ **Toda movimenta√ß√£o** registrada na UDM base do lote
- ‚úÖ **Convers√£o autom√°tica** quando informado em outra UDM
- ‚úÖ **Valida√ß√£o** de fator de convers√£o

### **RB-04: Valores e C√°lculos**
- ‚úÖ **Valor total** = quantidade_base √ó valor_unit√°rio
- ‚úÖ **Rastreamento** de valor por lote
- ‚úÖ **C√°lculo** de valor em movimenta√ß√µes

### **RB-05: Auditoria e Logs**
- ‚úÖ **Altera√ß√µes cr√≠ticas** requerem justificativa
- ‚úÖ **Log completo** de todas as opera√ß√µes
- ‚úÖ **Rastreabilidade** de usu√°rio e timestamp

### **RB-06: Tombamento**
- ‚úÖ **N√∫mero de tombo** √∫nico por patrim√¥nio
- ‚úÖ **Valida√ß√£o** de duplicidade
- ‚úÖ **Controle** de patrim√¥nio vs. consumo

### **RB-07: Estados do Material**
- ‚úÖ **Estados poss√≠veis:** NOVO, BOM, REGULAR, RUIM, INSERVIVEL
- ‚úÖ **Transi√ß√µes** controladas por regras
- ‚úÖ **Hist√≥rico** de mudan√ßas de estado

### **RB-08: Anexos**
- ‚úÖ **Anexos obrigat√≥rios** em doa√ß√µes e baixas
- ‚úÖ **Valida√ß√£o** de tipo e tamanho
- ‚úÖ **Hash SHA256** para integridade
- ‚úÖ **Armazenamento** seguro

---

## üîå API REST - Especifica√ß√£o

### **Autentica√ß√£o**
```
Authorization: Bearer {token}
Content-Type: application/json
```

### **Base URL**
```
https://api.defesacivil.am.gov.br/api/v1/inventario
```

### **Endpoints Principais**

#### **Materiais**
```http
POST   /materiais                    # Criar material
GET    /materiais                    # Listar materiais (com filtros)
GET    /materiais/{id}               # Detalhar material
PATCH  /materiais/{id}               # Atualizar material
DELETE /materiais/{id}               # Inativar material
```

#### **Lotes**
```http
POST   /lotes                        # Criar lote
GET    /lotes                        # Listar lotes
GET    /lotes/{id}                   # Detalhar lote
PATCH  /lotes/{id}                   # Atualizar lote
```

#### **Movimenta√ß√µes**
```http
POST   /movimentacoes/entrada        # Entrada em estoque
POST   /movimentacoes/alocacao       # Aloca√ß√£o/entrega
POST   /movimentacoes/transferencia  # Transfer√™ncia
POST   /movimentacoes/doacao         # Doa√ß√£o
POST   /movimentacoes/ajuste         # Ajuste de estoque
POST   /movimentacoes/baixa          # Baixa de material
GET    /movimentacoes                # Listar movimenta√ß√µes
POST   /movimentacoes/{id}/aprovar   # Aprovar movimenta√ß√£o
POST   /movimentacoes/{id}/reprovar  # Reprovar movimenta√ß√£o
```

#### **Anexos**
```http
POST   /anexos                       # Upload de arquivo
GET    /anexos                       # Listar anexos
GET    /anexos/{id}                  # Download de arquivo
DELETE /anexos/{id}                  # Remover anexo
```

#### **Relat√≥rios**
```http
GET    /relatorios/saldos            # Relat√≥rio de saldos
GET    /relatorios/movimentacoes     # Relat√≥rio de movimenta√ß√µes
GET    /relatorios/auditoria         # Relat√≥rio de auditoria
```

### **Exemplo de Request - Criar Material**
```json
{
  "nome": "Kit Higiene B√°sico",
  "id_compra": "COMPRA-2025-0001",
  "link_siged": "https://siged.am.gov.br/processo/123456",
  "descricao": "Kit contendo sabonete, shampoo, pasta de dente e escova",
  "udm_base_id": "uuid-udm-unidade",
  "valor_unitario_compra": 25.50,
  "possui_tombo": false,
  "tags": ["higiene", "kit", "emergencia"],
  "min_stock": 100,
  "max_stock": 1000,
  "lote_inicial": {
    "quantidade": 500,
    "condicao_inicial": "NOVO",
    "numero_empenho": "EMP-2025-001",
    "numero_nota_fiscal": "NF-123456"
  }
}
```

---

## üñ•Ô∏è Interface do Usu√°rio

### **Tela 1: Cadastro de Material**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üì¶ Cadastro de Material                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Nome do Material: [Kit Higiene B√°sico            ]     ‚îÇ
‚îÇ ID da Compra:     [COMPRA-2025-0001              ]     ‚îÇ
‚îÇ Link SIGED:       [https://siged.am.gov.br/...   ]     ‚îÇ
‚îÇ Descri√ß√£o:        [Kit contendo sabonete...      ]     ‚îÇ
‚îÇ Categoria:        [Emerg√™ncia ‚ñº]                       ‚îÇ
‚îÇ UDM Base:         [Unidade ‚ñº]                          ‚îÇ
‚îÇ Valor Unit√°rio:   [R$ 25,50]                          ‚îÇ
‚îÇ Possui Tombo:     [‚òê] N√∫mero: [_____________]          ‚îÇ
‚îÇ Tags:             [higiene, kit, emergencia]           ‚îÇ
‚îÇ Estoque M√≠nimo:   [100] M√°ximo: [1000]                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üì¶ Lote Inicial                                        ‚îÇ
‚îÇ Quantidade:       [500] UDM: [Unidade ‚ñº]              ‚îÇ
‚îÇ Condi√ß√£o:         [Novo ‚ñº]                            ‚îÇ
‚îÇ N¬∫ Empenho:       [EMP-2025-001]                      ‚îÇ
‚îÇ N¬∫ Nota Fiscal:   [NF-123456]                         ‚îÇ
‚îÇ Validade:         [__/__/____]                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìé Anexos                                              ‚îÇ
‚îÇ [üìÅ Selecionar Arquivos] [üìÑ nota_fiscal.pdf]         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üíæ Salvar] [üíæ Salvar e Novo] [‚ùå Cancelar]          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Tela 2: Movimenta√ß√£o de Estoque**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üîÑ Movimenta√ß√£o de Estoque                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Tipo: [Aloca√ß√£o ‚ñº]                                     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Material: [Kit Higiene B√°sico ‚ñº]                       ‚îÇ
‚îÇ Lote:     [LOTE-001 ‚ñº] Saldo: 500 UN                   ‚îÇ
‚îÇ Quantidade: [50] UDM: [Unidade ‚ñº] = 50 UN             ‚îÇ
‚îÇ Destino:   [Departamento de Opera√ß√µes ‚ñº]               ‚îÇ
‚îÇ Condi√ß√£o:  [Novo ‚ñº]                                    ‚îÇ
‚îÇ Observa√ß√µes: [Para opera√ß√£o de enchente...]            ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìé Anexos                                              ‚îÇ
‚îÇ [üìÅ Selecionar Arquivos] [üìÑ termo_entrega.pdf]        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [‚úÖ Processar] [‚ùå Cancelar]                           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Tela 3: Fila de Aprova√ß√µes**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ ‚è≥ Aprova√ß√µes Pendentes                                 ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîç Filtros: [Tipo ‚ñº] [Per√≠odo ‚ñº] [Status ‚ñº]           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ ID        ‚îÇ Tipo        ‚îÇ Material    ‚îÇ Valor  ‚îÇ A√ß√µes ‚îÇ
‚îÇ DOA-001   ‚îÇ Doa√ß√£o      ‚îÇ Kit Higiene ‚îÇ R$ 1.275‚îÇ [üëÅÔ∏è] ‚îÇ
‚îÇ TRA-002   ‚îÇ Transfer√™ncia‚îÇ Cabo El√©trico‚îÇ R$ 500 ‚îÇ [üëÅÔ∏è] ‚îÇ
‚îÇ BAI-003   ‚îÇ Baixa       ‚îÇ Gerador     ‚îÇ R$ 5.000‚îÇ [üëÅÔ∏è] ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [‚úÖ Aprovar Selecionados] [‚ùå Reprovar Selecionados]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìä Relat√≥rios e Dashboards

### **Dashboard Principal**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä Dashboard - Sistema de Invent√°rio                    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìà Indicadores Principais                               ‚îÇ
‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ ‚îÇ 1.247   ‚îÇ ‚îÇ   23    ‚îÇ ‚îÇ   5     ‚îÇ ‚îÇ   R$    ‚îÇ        ‚îÇ
‚îÇ ‚îÇMateriais‚îÇ ‚îÇAprova√ß√µes‚îÇ ‚îÇAlertas  ‚îÇ ‚îÇ 45.2K  ‚îÇ        ‚îÇ
‚îÇ ‚îÇCadastrados‚îÇ ‚îÇPendentes‚îÇ ‚îÇEstoque ‚îÇ ‚îÇValor Total‚îÇ      ‚îÇ
‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üö® Alertas de Estoque                                   ‚îÇ
‚îÇ ‚Ä¢ Cabo El√©trico 2.5mm: Abaixo do m√≠nimo (5m)          ‚îÇ
‚îÇ ‚Ä¢ Kit Higiene: Pr√≥ximo ao m√°ximo (950/1000)            ‚îÇ
‚îÇ ‚Ä¢ Gerador: Vencimento em 30 dias                       ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üìã Movimenta√ß√µes Recentes                               ‚îÇ
‚îÇ 15/01 - Aloca√ß√£o: 50 Kit Higiene ‚Üí Dept. Opera√ß√µes     ‚îÇ
‚îÇ 14/01 - Transfer√™ncia: 100m Cabo ‚Üí Munic√≠pio Manacapuru‚îÇ
‚îÇ 13/01 - Entrada: 500 Kit Higiene (LOTE-003)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Relat√≥rio de Saldos**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üìä Relat√≥rio de Saldos - Janeiro 2025                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ üîç Filtros: [Categoria ‚ñº] [Destino ‚ñº] [Per√≠odo ‚ñº]     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Material           ‚îÇ Categoria ‚îÇ Destino    ‚îÇ Saldo    ‚îÇ
‚îÇ Kit Higiene        ‚îÇ Emerg√™ncia‚îÇ Central    ‚îÇ 450 UN   ‚îÇ
‚îÇ Cabo El√©trico 2.5mm‚îÇ El√©trico  ‚îÇ Central    ‚îÇ 5 M      ‚îÇ
‚îÇ Gerador 5KVA       ‚îÇ Equipamento‚îÇ Central   ‚îÇ 2 UN     ‚îÇ
‚îÇ Purificador        ‚îÇ Equipamento‚îÇ Central   ‚îÇ 1 UN     ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ [üìÑ Exportar PDF] [üìä Exportar Excel] [üìß Enviar]      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîê Seguran√ßa e Auditoria

### **Controle de Acesso**
- ‚úÖ **Autentica√ß√£o** via SISPDEC IAM
- ‚úÖ **Autoriza√ß√£o** baseada em perfis
- ‚úÖ **Permiss√µes granulares** por funcionalidade
- ‚úÖ **Controle por unidade** administrativa

### **Auditoria**
- ‚úÖ **Log completo** de todas as opera√ß√µes
- ‚úÖ **Rastreabilidade** de usu√°rio e IP
- ‚úÖ **Hash SHA256** para anexos
- ‚úÖ **Backup** autom√°tico de dados
- ‚úÖ **Reten√ß√£o** de logs por 7 anos

### **Integridade**
- ‚úÖ **Valida√ß√£o** de dados de entrada
- ‚úÖ **Transa√ß√µes** at√¥micas
- ‚úÖ **Rollback** em caso de erro
- ‚úÖ **Verifica√ß√£o** de integridade

---

## üöÄ Crit√©rios de Aceite

### **CA-01: Convers√£o de UDM**
```
Dado: Material com UDM base UN
Quando: Usu√°rio informa 5 caixas (1 caixa = 12 UN)
Ent√£o: Sistema registra 60 UN no lote
```

### **CA-02: Valida√ß√£o de Anexos**
```
Dado: Doa√ß√£o sem anexo de autoriza√ß√£o
Quando: Usu√°rio tenta salvar
Ent√£o: Sistema bloqueia com erro "Anexo obrigat√≥rio"
```

### **CA-03: Aprova√ß√£o de Transfer√™ncia**
```
Dado: Transfer√™ncia intersecretarias
Quando: Movimenta√ß√£o √© enviada
Ent√£o: Sistema cria pend√™ncia para INVENTARIO_GESTOR
```

### **CA-04: Controle de Saldo**
```
Dado: Saldo insuficiente (50 UN dispon√≠veis)
Quando: Usu√°rio tenta alocar 100 UN
Ent√£o: Sistema exibe erro e impede opera√ß√£o
```

### **CA-05: Unicidade de Tombo**
```
Dado: N√∫mero de tombo j√° existente
Quando: Usu√°rio tenta cadastrar mesmo n√∫mero
Ent√£o: Sistema bloqueia com mensagem de duplicidade
```

### **CA-06: Relat√≥rios em Tempo Real**
```
Dado: Movimenta√ß√£o de estoque
Quando: Usu√°rio consulta relat√≥rio de saldos
Ent√£o: Relat√≥rio reflete movimenta√ß√£o imediatamente
```

---

## üìà M√©tricas e Alertas

### **M√©tricas Operacionais**
- üìä **Taxa de aprova√ß√£o** de movimenta√ß√µes
- üìä **Tempo m√©dio** de processamento
- üìä **Volume** de movimenta√ß√µes por per√≠odo
- üìä **Valor total** em estoque
- üìä **N√∫mero de materiais** cadastrados

### **Alertas Autom√°ticos**
- üö® **Estoque abaixo** do m√≠nimo
- üö® **Estoque acima** do m√°ximo
- üö® **Validade pr√≥xima** (‚â§30 dias)
- üö® **Aprova√ß√µes pendentes** > 48h
- üö® **Erros de upload** de anexos

### **Dashboards**
- üìä **Dashboard executivo** para gestores
- üìä **Dashboard operacional** para estoquistas
- üìä **Dashboard de auditoria** para controladoria
- üìä **Relat√≥rios** personaliz√°veis

---

## üîÑ Integra√ß√µes

### **SIGED (Sistema de Gest√£o Eletr√¥nica de Documentos)**
- üîó **Links** para processos
- üîó **API** para consulta de dados (futuro)
- üîó **Sincroniza√ß√£o** de status

### **Power BI / Data Lake**
- üìä **Endpoints** de relat√≥rios
- üìä **Dumps** agendados (CSV/Parquet)
- üìä **Dashboards** em tempo real

### **Webhooks**
- üîî **Notifica√ß√µes** de movimenta√ß√µes
- üîî **Alertas** de aprova√ß√£o
- üîî **Integra√ß√µes** com sistemas externos

---

## üìÖ Planejamento de Implementa√ß√£o

### **Fase 1: Funda√ß√£o (3-4 semanas)**
- ‚úÖ Modelo de dados
- ‚úÖ APIs b√°sicas
- ‚úÖ Autentica√ß√£o/autoriza√ß√£o
- ‚úÖ Sistema de anexos

### **Fase 2: Opera√ß√µes (3-4 semanas)**
- ‚úÖ Cadastro de materiais
- ‚úÖ Movimenta√ß√µes b√°sicas
- ‚úÖ Sistema de aprova√ß√µes
- ‚úÖ Relat√≥rios b√°sicos

### **Fase 3: Avan√ßado (2-3 semanas)**
- ‚úÖ Invent√°rio f√≠sico
- ‚úÖ Dashboards
- ‚úÖ Integra√ß√µes
- ‚úÖ Otimiza√ß√µes

### **Fase 4: Testes e Deploy (2 semanas)**
- ‚úÖ Testes de integra√ß√£o
- ‚úÖ Testes de performance
- ‚úÖ Deploy em produ√ß√£o
- ‚úÖ Treinamento de usu√°rios

**Total estimado: 10-13 semanas**

---

## üéØ Benef√≠cios Esperados

### **Operacionais**
- ‚úÖ **Centraliza√ß√£o** de informa√ß√µes
- ‚úÖ **Rastreabilidade** completa
- ‚úÖ **Automatiza√ß√£o** de processos
- ‚úÖ **Redu√ß√£o** de erros manuais
- ‚úÖ **Efici√™ncia** operacional

### **Gerenciais**
- ‚úÖ **Visibilidade** em tempo real
- ‚úÖ **Controle** de custos
- ‚úÖ **Relat√≥rios** consolidados
- ‚úÖ **Auditoria** facilitada
- ‚úÖ **Tomada de decis√£o** baseada em dados

### **T√©cnicos**
- ‚úÖ **Escalabilidade** do sistema
- ‚úÖ **Integra√ß√£o** com outros sistemas
- ‚úÖ **Manutenibilidade** do c√≥digo
- ‚úÖ **Seguran√ßa** robusta
- ‚úÖ **Performance** otimizada

---

## üìù Considera√ß√µes Finais

Este documento representa a especifica√ß√£o t√©cnica unificada para o Sistema de Controle de Estoque e Invent√°rio da Defesa Civil do Amazonas, combinando as melhores pr√°ticas de ambos os sistemas analisados.

### **Pr√≥ximos Passos Recomendados:**
1. **Aprova√ß√£o** da especifica√ß√£o t√©cnica
2. **Prototipagem** de alta fidelidade
3. **Detalhamento** de regras de convers√£o
4. **Defini√ß√£o** de cronograma detalhado
5. **Forma√ß√£o** da equipe de desenvolvimento

### **Contatos para D√∫vidas:**
- **T√©cnico:** DDS - Departamento de Desenvolvimento de Sistemas
- **Operacional:** Coordena√ß√£o de Log√≠stica
- **Gerencial:** Secretaria Executiva Adjunta T√©cnica

---

*Documento elaborado em janeiro de 2025 para a Defesa Civil do Amazonas - Sistema SISPDEC*
